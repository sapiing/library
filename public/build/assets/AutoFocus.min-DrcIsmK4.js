var E=(a,r)=>()=>(r||a((r={exports:{}}).exports,r),r.exports);var k=E((F,f)=>{(function(a,r){typeof F=="object"&&typeof f<"u"?f.exports=r():typeof define=="function"&&define.amd?define(r):(a=typeof globalThis<"u"?globalThis:a||self,a.FormValidation=a.FormValidation||{},a.FormValidation.plugins=a.FormValidation.plugins||{},a.FormValidation.plugins.AutoFocus=r())})(void 0,function(){function a(i,n){if(!(i instanceof n))throw new TypeError("Cannot call a class as a function")}function r(i,n){for(var o=0;o<n.length;o++){var t=n[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(i,t.key,t)}}function c(i,n,o){return n&&r(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}function h(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),n&&u(i,n)}function s(i){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},s(i)}function u(i,n){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(i,n)}function _(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function l(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function P(i,n){if(n&&(typeof n=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l(i)}function m(i){var n=_();return function(){var t=s(i),e;if(n){var d=s(this).constructor;e=Reflect.construct(t,arguments,d)}else e=t.apply(this,arguments);return P(this,e)}}var v=FormValidation.Plugin,O=function(i){h(o,i);var n=m(o);function o(t){var e;return a(this,o),e=n.call(this,t),e.statuses=new Map,e.opts=Object.assign({},{onStatusChanged:function(){}},t),e.elementValidatingHandler=e.onElementValidating.bind(l(e)),e.elementValidatedHandler=e.onElementValidated.bind(l(e)),e.elementNotValidatedHandler=e.onElementNotValidated.bind(l(e)),e.elementIgnoredHandler=e.onElementIgnored.bind(l(e)),e.fieldAddedHandler=e.onFieldAdded.bind(l(e)),e.fieldRemovedHandler=e.onFieldRemoved.bind(l(e)),e}return c(o,[{key:"install",value:function(){this.core.on("core.element.validating",this.elementValidatingHandler).on("core.element.validated",this.elementValidatedHandler).on("core.element.notvalidated",this.elementNotValidatedHandler).on("core.element.ignored",this.elementIgnoredHandler).on("core.field.added",this.fieldAddedHandler).on("core.field.removed",this.fieldRemovedHandler)}},{key:"uninstall",value:function(){this.statuses.clear(),this.core.off("core.element.validating",this.elementValidatingHandler).off("core.element.validated",this.elementValidatedHandler).off("core.element.notvalidated",this.elementNotValidatedHandler).off("core.element.ignored",this.elementIgnoredHandler).off("core.field.added",this.fieldAddedHandler).off("core.field.removed",this.fieldRemovedHandler)}},{key:"areFieldsValid",value:function(){return Array.from(this.statuses.values()).every(function(e){return e==="Valid"||e==="NotValidated"||e==="Ignored"})}},{key:"getStatuses",value:function(){return this.statuses}},{key:"onFieldAdded",value:function(e){this.statuses.set(e.field,"NotValidated")}},{key:"onFieldRemoved",value:function(e){this.statuses.has(e.field)&&this.statuses.delete(e.field),this.opts.onStatusChanged(this.areFieldsValid())}},{key:"onElementValidating",value:function(e){this.statuses.set(e.field,"Validating"),this.opts.onStatusChanged(!1)}},{key:"onElementValidated",value:function(e){this.statuses.set(e.field,e.valid?"Valid":"Invalid"),e.valid?this.opts.onStatusChanged(this.areFieldsValid()):this.opts.onStatusChanged(!1)}},{key:"onElementNotValidated",value:function(e){this.statuses.set(e.field,"NotValidated"),this.opts.onStatusChanged(!1)}},{key:"onElementIgnored",value:function(e){this.statuses.set(e.field,"Ignored"),this.opts.onStatusChanged(this.areFieldsValid())}}]),o}(v),H=function(i){h(o,i);var n=m(o);function o(t){var e;return a(this,o),e=n.call(this,t),e.fieldStatusPluginName="___autoFocusFieldStatus",e.opts=Object.assign({},{onPrefocus:function(){}},t),e.invalidFormHandler=e.onFormInvalid.bind(l(e)),e}return c(o,[{key:"install",value:function(){this.core.on("core.form.invalid",this.invalidFormHandler).registerPlugin(this.fieldStatusPluginName,new O)}},{key:"uninstall",value:function(){this.core.off("core.form.invalid",this.invalidFormHandler).deregisterPlugin(this.fieldStatusPluginName)}},{key:"onFormInvalid",value:function(){var e=this.core.getPlugin(this.fieldStatusPluginName),d=e.getStatuses(),g=Object.keys(this.core.getFields()).filter(function(S){return d.get(S)==="Invalid"});if(g.length>0){var p=g[0],y=this.core.getElements(p);if(y.length>0){var V=y[0],b={firstElement:V,field:p};this.core.emit("plugins.autofocus.prefocus",b),this.opts.onPrefocus(b),V.focus()}}}}]),o}(v);return H})});export default k();
