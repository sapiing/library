var E=(o,c)=>()=>(c||o((c={exports:{}}).exports,c),c.exports);var T=E((b,v)=>{(function(o,c){typeof b=="object"&&typeof v<"u"?v.exports=c():typeof define=="function"&&define.amd?define(c):(o=typeof globalThis<"u"?globalThis:o||self,o.FormValidation=o.FormValidation||{},o.FormValidation.plugins=o.FormValidation.plugins||{},o.FormValidation.plugins.Recaptcha=c())})(void 0,function(){function o(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function c(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function w(t,i,n){return i&&c(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function P(t,i,n){return i in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function _(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&p(t,i)}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},u(t)}function p(t,i){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,e){return r.__proto__=e,r},p(t,i)}function A(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function d(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function F(t,i){if(i&&(typeof i=="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}function O(t){var i=A();return function(){var r=u(t),e;if(i){var a=u(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return F(this,e)}}var C=FormValidation.Plugin,I=FormValidation.utils.fetch,f=function(t){_(n,t);var i=O(n);function n(r){var e;return o(this,n),e=i.call(this,r),e.widgetIds=new Map,e.captchaStatus="NotValidated",e.opts=Object.assign({},n.DEFAULT_OPTIONS,r),e.fieldResetHandler=e.onResetField.bind(d(e)),e.preValidateFilter=e.preValidate.bind(d(e)),e.iconPlacedHandler=e.onIconPlaced.bind(d(e)),e}return w(n,[{key:"install",value:function(){var e=this;this.core.on("core.field.reset",this.fieldResetHandler).on("plugins.icon.placed",this.iconPlacedHandler).registerFilter("validate-pre",this.preValidateFilter);var a=typeof window[n.LOADED_CALLBACK]>"u"?function(){}:window[n.LOADED_CALLBACK];window[n.LOADED_CALLBACK]=function(){a();var L={badge:e.opts.badge,callback:function(){e.opts.backendVerificationUrl===""&&(e.captchaStatus="Valid",e.core.updateFieldStatus(n.CAPTCHA_FIELD,"Valid"))},"error-callback":function(){e.captchaStatus="Invalid",e.core.updateFieldStatus(n.CAPTCHA_FIELD,"Invalid")},"expired-callback":function(){e.captchaStatus="NotValidated",e.core.updateFieldStatus(n.CAPTCHA_FIELD,"NotValidated")},sitekey:e.opts.siteKey,size:e.opts.size},S=window.grecaptcha.render(e.opts.element,L);e.widgetIds.set(e.opts.element,S),e.core.addField(n.CAPTCHA_FIELD,{validators:{promise:{message:e.opts.message,promise:function(V){var y=e.widgetIds.has(e.opts.element)?window.grecaptcha.getResponse(e.widgetIds.get(e.opts.element)):V.value;return y===""?(e.captchaStatus="Invalid",Promise.resolve({valid:!1})):e.opts.backendVerificationUrl===""?(e.captchaStatus="Valid",Promise.resolve({valid:!0})):e.captchaStatus==="Valid"?Promise.resolve({valid:!0}):I(e.opts.backendVerificationUrl,{method:"POST",params:P({},n.CAPTCHA_FIELD,y)}).then(function(m){var g="".concat(m.success)==="true";return e.captchaStatus=g?"Valid":"Invalid",Promise.resolve({meta:m,valid:g})}).catch(function(m){return e.captchaStatus="NotValidated",Promise.reject({valid:!1})})}}}})};var s=this.getScript();if(!document.body.querySelector('script[src="'.concat(s,'"]'))){var l=document.createElement("script");l.type="text/javascript",l.async=!0,l.defer=!0,l.src=s,document.body.appendChild(l)}}},{key:"uninstall",value:function(){this.timer&&clearTimeout(this.timer),this.core.off("core.field.reset",this.fieldResetHandler).off("plugins.icon.placed",this.iconPlacedHandler).deregisterFilter("validate-pre",this.preValidateFilter),this.widgetIds.clear();var e=this.getScript(),a=[].slice.call(document.body.querySelectorAll('script[src="'.concat(e,'"]')));a.forEach(function(s){return s.parentNode.removeChild(s)}),this.core.removeField(n.CAPTCHA_FIELD)}},{key:"getScript",value:function(){var e=this.opts.language?"&hl=".concat(this.opts.language):"";return"https://www.google.com/recaptcha/api.js?onload=".concat(n.LOADED_CALLBACK,"&render=explicit").concat(e)}},{key:"preValidate",value:function(){var e=this;if(this.opts.size==="invisible"&&this.widgetIds.has(this.opts.element)){var a=this.widgetIds.get(this.opts.element);return this.captchaStatus==="Valid"?Promise.resolve():new Promise(function(s,l){window.grecaptcha.execute(a).then(function(){e.timer&&clearTimeout(e.timer),e.timer=window.setTimeout(s,1*1e3)})})}else return Promise.resolve()}},{key:"onResetField",value:function(e){if(e.field===n.CAPTCHA_FIELD&&this.widgetIds.has(this.opts.element)){var a=this.widgetIds.get(this.opts.element);window.grecaptcha.reset(a)}}},{key:"onIconPlaced",value:function(e){if(e.field===n.CAPTCHA_FIELD)if(this.opts.size==="invisible")e.iconElement.style.display="none";else{var a=document.getElementById(this.opts.element);a&&a.parentNode.insertBefore(e.iconElement,a.nextSibling)}}}]),n}(C);return f.CAPTCHA_FIELD="g-recaptcha-response",f.DEFAULT_OPTIONS={backendVerificationUrl:"",badge:"bottomright",size:"normal",theme:"light"},f.LOADED_CALLBACK="___reCaptchaLoaded___",f})});export default T();
